<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>simpleplugin &mdash; SimplePlugin 1.6 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="SimplePlugin 1.6 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="../api.html" />
    <link rel="next" title="Useful Links" href="../links.html" />
    <link rel="prev" title="API Reference" href="../api.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-simpleplugin">
<span id="simpleplugin"></span><h1>simpleplugin<a class="headerlink" href="#module-simpleplugin" title="Permalink to this headline">¶</a></h1>
<p>SimplePlugin micro-framework for Kodi content plugins</p>
<p><strong>Author</strong>: Roman Miroshnychenko aka Roman V.M.</p>
<p><strong>License</strong>: <a class="reference external" href="https://www.gnu.org/copyleft/gpl.html">GPL v.3</a></p>
<p class="rubric">Classes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#simpleplugin.Addon" title="simpleplugin.Addon"><code class="xref py py-obj docutils literal"><span class="pre">Addon</span></code></a>([<a href="#id1"><span class="problematic" id="id2">id_</span></a>])</td>
<td>Base addon class</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#simpleplugin.Plugin" title="simpleplugin.Plugin"><code class="xref py py-obj docutils literal"><span class="pre">Plugin</span></code></a>([<a href="#id3"><span class="problematic" id="id4">id_</span></a>])</td>
<td>Plugin class</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-obj docutils literal"><span class="pre">Storage</span></code></a>(storage_dir[,&nbsp;filename])</td>
<td>Persistent storage for arbitrary data with a dictionary-like interface</td>
</tr>
</tbody>
</table>
<p class="rubric">Exceptions</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#simpleplugin.SimplePluginError" title="simpleplugin.SimplePluginError"><code class="xref py py-obj docutils literal"><span class="pre">SimplePluginError</span></code></a></td>
<td>Custom exception</td>
</tr>
</tbody>
</table>
<dl class="exception">
<dt id="simpleplugin.SimplePluginError">
<em class="property">exception </em><code class="descclassname">simpleplugin.</code><code class="descname">SimplePluginError</code><a class="reference internal" href="../_modules/simpleplugin.html#SimplePluginError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.SimplePluginError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/exceptions.html#exceptions.Exception" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></a></p>
<p>Custom exception</p>
</dd></dl>

<dl class="class">
<dt id="simpleplugin.Storage">
<em class="property">class </em><code class="descclassname">simpleplugin.</code><code class="descname">Storage</code><span class="sig-paren">(</span><em>storage_dir</em>, <em>filename='storage.pcl'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Storage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_abcoll.MutableMapping</span></code></p>
<p>Persistent storage for arbitrary data with a dictionary-like interface</p>
<p>It is designed as a context manager and better be used
with &#8216;with&#8217; statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>storage_dir</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; directory for storage</li>
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; the name of a storage file (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Storage</span><span class="p">(</span><span class="s1">&#39;/foo/bar/storage/&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">storage</span><span class="p">:</span>
    <span class="n">storage</span><span class="p">[</span><span class="s1">&#39;key1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value1</span>
    <span class="n">value2</span> <span class="o">=</span> <span class="n">storage</span><span class="p">[</span><span class="s1">&#39;key2&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After exiting <a class="reference external" href="https://docs.python.org/2.7/reference/compound_stmts.html#with" title="(in Python v2.7)"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> block a <a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> instance is invalidated.
Storage contents are saved to disk only for a new storage or if the contents have been changed.</p>
</div>
<dl class="method">
<dt id="simpleplugin.Storage.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Storage.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Storage.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Save storage contents to disk</p>
<p>This method saves new and changed <a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> contents to disk
and invalidates the Storage instance. Unchanged Storage is not saved
but simply invalidated.</p>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Storage.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Storage.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Storage.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a copy of storage contents</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this method performs a <em>deep</em> copy operation.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a copy of storage contents</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpleplugin.Addon">
<em class="property">class </em><code class="descclassname">simpleplugin.</code><code class="descname">Addon</code><span class="sig-paren">(</span><em>id_=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Base addon class</p>
<p>Provides access to basic addon parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; addon id, e.g. &#8216;plugin.video.foo&#8217; (optional)</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="simpleplugin.Addon.addon">
<code class="descname">addon</code><a class="headerlink" href="#simpleplugin.Addon.addon" title="Permalink to this definition">¶</a></dt>
<dd><p>Kodi Addon instance that represents this Addon</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Addon instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcaddon.html#xbmcaddon.Addon" title="(in Kodistubs v2.0.0)">xbmcaddon.Addon</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="simpleplugin.Addon.id">
<code class="descname">id</code><a class="headerlink" href="#simpleplugin.Addon.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Addon ID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Addon ID, e.g. &#8216;plugin.video.foo&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="simpleplugin.Addon.path">
<code class="descname">path</code><a class="headerlink" href="#simpleplugin.Addon.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Addon path</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">path to the addon folder</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="simpleplugin.Addon.icon">
<code class="descname">icon</code><a class="headerlink" href="#simpleplugin.Addon.icon" title="Permalink to this definition">¶</a></dt>
<dd><p>Addon icon</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">path to the addon icon image</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="simpleplugin.Addon.fanart">
<code class="descname">fanart</code><a class="headerlink" href="#simpleplugin.Addon.fanart" title="Permalink to this definition">¶</a></dt>
<dd><p>Addon fanart</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">path to the addon fanart image</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="simpleplugin.Addon.config_dir">
<code class="descname">config_dir</code><a class="headerlink" href="#simpleplugin.Addon.config_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Addon config dir</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">path to the addon config dir</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.get_localized_string">
<code class="descname">get_localized_string</code><span class="sig-paren">(</span><em>id_</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.get_localized_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.get_localized_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get localized UI string</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; UI string ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">UI string in the current language</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#unicode" title="(in Python v2.7)">unicode</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.get_setting">
<code class="descname">get_setting</code><span class="sig-paren">(</span><em>id_</em>, <em>convert=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.get_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.get_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Get addon setting</p>
<p>If <code class="docutils literal"><span class="pre">convert=True</span></code>, &#8216;bool&#8217; settings are converted to Python <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> values,
and numeric strings to Python <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#long" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">long</span></code></a> or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a> depending on their format.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Settings can also be read via <a class="reference internal" href="#simpleplugin.Addon" title="simpleplugin.Addon"><code class="xref py py-class docutils literal"><span class="pre">Addon</span></code></a> instance poperties named as the respective settings.
I.e. <code class="docutils literal"><span class="pre">addon.foo</span></code> is equal to <code class="docutils literal"><span class="pre">addon.get_setting('foo')</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; setting ID</li>
<li><strong>convert</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; try to guess and convert the setting to an appropriate type
E.g. <code class="docutils literal"><span class="pre">'1.0'</span></code> will be converted to float <code class="docutils literal"><span class="pre">1.0</span></code> number, <code class="docutils literal"><span class="pre">'true'</span></code> to <code class="docutils literal"><span class="pre">True</span></code> and so on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">setting value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.set_setting">
<code class="descname">set_setting</code><span class="sig-paren">(</span><em>id_</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.set_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.set_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Set addon setting</p>
<p>Python <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> type are converted to <code class="docutils literal"><span class="pre">'true'</span></code> or <code class="docutils literal"><span class="pre">'false'</span></code>
Non-string/non-unicode values are converted to strings.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Setting values via <a class="reference internal" href="#simpleplugin.Addon" title="simpleplugin.Addon"><code class="xref py py-class docutils literal"><span class="pre">Addon</span></code></a> instance properties is not supported!
Values can only be set using <a class="reference internal" href="#simpleplugin.Addon.set_setting" title="simpleplugin.Addon.set_setting"><code class="xref py py-meth docutils literal"><span class="pre">Addon.set_setting()</span></code></a> method.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; setting ID</li>
<li><strong>value</strong> &#8211; setting value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.log">
<code class="descname">log</code><span class="sig-paren">(</span><em>message</em>, <em>level=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Add message to Kodi log starting with Addon ID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; message to be written into the Kodi log</li>
<li><strong>level</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; log level. <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmc.html#module-xbmc" title="(in Kodistubs v2.0.0)"><code class="xref py py-mod docutils literal"><span class="pre">xbmc</span></code></a> module provides the necessary symbolic constants.
Default: <code class="docutils literal"><span class="pre">xbmc.LOGDEBUG</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.get_storage">
<code class="descname">get_storage</code><span class="sig-paren">(</span><em>filename='storage.pcl'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.get_storage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.get_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a persistent <a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> instance for storing arbitrary values between addon calls.</p>
<p>A <a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> instance can be used as a context manager.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="k">as</span> <span class="n">storage</span><span class="p">:</span>
    <span class="n">storage</span><span class="p">[</span><span class="s1">&#39;param1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value1</span>
    <span class="n">value2</span> <span class="o">=</span> <span class="n">storage</span><span class="p">[</span><span class="s1">&#39;param2&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After exiting <a class="reference external" href="https://docs.python.org/2.7/reference/compound_stmts.html#with" title="(in Python v2.7)"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> block a <a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> instance is invalidated.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; the name of a storage file (optional)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Storage object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#simpleplugin.Storage" title="simpleplugin.Storage">Storage</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.cached">
<code class="descname">cached</code><span class="sig-paren">(</span><em>duration=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.cached"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Cached decorator</p>
<p>Used to cache function return data</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@plugin</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># Do some stuff</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>duration</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; cache time in min, negative value &#8211; cache indefinitely</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.gettext">
<code class="descname">gettext</code><span class="sig-paren">(</span><em>ui_string</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.gettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.gettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a translated UI string from addon localization files.</p>
<p>This function emulates GNU Gettext for more convenient access
to localized addon UI strings. To reduce typing this method object
can be assigned to a <code class="docutils literal"><span class="pre">_</span></code> (single underscore) variable.</p>
<p>For using gettext emulation <a class="reference internal" href="#simpleplugin.Addon.initialize_gettext" title="simpleplugin.Addon.initialize_gettext"><code class="xref py py-meth docutils literal"><span class="pre">Addon.initialize_gettext()</span></code></a> method
needs to be called first. See documentation for that method for more info
about Gettext emulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ui_string</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; a UI string from English <code class="file docutils literal"><span class="pre">strings.po</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a UI string from translated <code class="file docutils literal"><span class="pre">strings.po</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#unicode" title="(in Python v2.7)">unicode</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#simpleplugin.SimplePluginError" title="simpleplugin.SimplePluginError"><code class="xref py py-exc docutils literal"><span class="pre">SimplePluginError</span></code></a> if <a class="reference internal" href="#simpleplugin.Addon.initialize_gettext" title="simpleplugin.Addon.initialize_gettext"><code class="xref py py-meth docutils literal"><span class="pre">Addon.initialize_gettext()</span></code></a> wasn&#8217;t called first
or if a string is not found in English <code class="file docutils literal"><span class="pre">strings.po</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Addon.initialize_gettext">
<code class="descname">initialize_gettext</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Addon.initialize_gettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Addon.initialize_gettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize GNU gettext emulation in addon</p>
<p>Kodi localization system for addons is not very convenient
because you need to operate with numeric string codes instead
of UI strings themselves which reduces code readability and
may lead to errors. The <a class="reference internal" href="#simpleplugin.Addon" title="simpleplugin.Addon"><code class="xref py py-class docutils literal"><span class="pre">Addon</span></code></a> class provides facilities
for emulating GNU Gettext localization system.</p>
<p>This allows to use UI strings from addon&#8217;s English <code class="file docutils literal"><span class="pre">strings.po</span></code>
file instead of numeric codes to return localized strings from
respective localized <code class="file docutils literal"><span class="pre">.po</span></code> files.</p>
<p>This method returns <a class="reference internal" href="#simpleplugin.Addon.gettext" title="simpleplugin.Addon.gettext"><code class="xref py py-meth docutils literal"><span class="pre">Addon.gettext()</span></code></a> method object that
can be assigned to a short alias to reduce typing. Traditionally,
<code class="docutils literal"><span class="pre">_</span></code> (a single underscore) is used for this purpose.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">addon</span> <span class="o">=</span> <span class="n">simpleplugin</span><span class="o">.</span><span class="n">Addon</span><span class="p">()</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">addon</span><span class="o">.</span><span class="n">initialize_gettext</span><span class="p">()</span>

<span class="n">xbmcgui</span><span class="o">.</span><span class="n">Dialog</span><span class="p">()</span><span class="o">.</span><span class="n">notification</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Warning!&#39;</span><span class="p">),</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Something happened&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>In the preceding example the notification strings will be replaced
with localized versions if these strings are translated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="#simpleplugin.Addon.gettext" title="simpleplugin.Addon.gettext"><code class="xref py py-meth docutils literal"><span class="pre">Addon.gettext()</span></code></a> method object</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#simpleplugin.SimplePluginError" title="simpleplugin.SimplePluginError"><code class="xref py py-exc docutils literal"><span class="pre">SimplePluginError</span></code></a> if the addon&#8217;s English <code class="file docutils literal"><span class="pre">strings.po</span></code> file is missing</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpleplugin.Plugin">
<em class="property">class </em><code class="descclassname">simpleplugin.</code><code class="descname">Plugin</code><span class="sig-paren">(</span><em>id_=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#simpleplugin.Addon" title="simpleplugin.Addon"><code class="xref py py-class docutils literal"><span class="pre">simpleplugin.Addon</span></code></a></p>
<p>Plugin class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; plugin&#8217;s id, e.g. &#8216;plugin.video.foo&#8217; (optional)</td>
</tr>
</tbody>
</table>
<p>This class provides a simplified API to create virtual directories of playable items
for Kodi content plugins.
<a class="reference internal" href="#simpleplugin.Plugin" title="simpleplugin.Plugin"><code class="xref py py-class docutils literal"><span class="pre">simpleplugin.Plugin</span></code></a> uses a concept of callable plugin actions (functions or methods)
that are mapped to &#8216;action&#8217; parameters via actions instance property.
A Plugin instance must have at least one action for its root section
mapped to &#8216;root&#8217; string.</p>
<p>Minimal example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">simpleplugin</span> <span class="k">import</span> <span class="n">Plugin</span>

<span class="n">plugin</span> <span class="o">=</span> <span class="n">Plugin</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">root_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Foo&#39;</span><span class="p">,</span>
            <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;some_action&#39;</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="s1">&#39;Foo&#39;</span><span class="p">)},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Bar&#39;</span><span class="p">,</span>
            <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">plugin</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;some_action&#39;</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="s1">&#39;Bar&#39;</span><span class="p">)}]</span>

<span class="k">def</span> <span class="nf">some_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]}]</span>

<span class="n">plugin</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_action</span>  <span class="c1"># Mandatory item!</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="s1">&#39;some_action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">some_action</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You need to map function or method objects without round brackets!</p>
</div>
<p>E.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">plugin</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="s1">&#39;some_action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">some_action</span>  <span class="c1"># Correct :)</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="s1">&#39;some_action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">some_action</span><span class="p">()</span>  <span class="c1"># Wrong! :(</span>
</pre></div>
</div>
<p>An action callable receives 1 parameter &#8211; params.
params is a dict containing plugin call parameters (including action string)
The action callable can return
either a list/generator of dictionaries representing Kodi virtual directory items
or a resolved playable path (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#unicode" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">unicode</span></code></a>) for Kodi to play.</p>
<p>Example 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="n">listing</span> <span class="o">=</span> <span class="n">get_listing</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Some external function to create listing</span>
    <span class="k">return</span> <span class="n">listing</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">listing</span></code> variable is a Python list/generator of dict items.
Example 2:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">play_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">get_path</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Some external function to get a playable path</span>
    <span class="k">return</span> <span class="n">path</span>
</pre></div>
</div>
<p>Each dict item can contain the following properties:</p>
<ul class="simple">
<li>label &#8211; item&#8217;s label (default: <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>label2 &#8211; item&#8217;s label2 (default: <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>thumb &#8211; item&#8217;s thumbnail (default: <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>icon &#8211; item&#8217;s icon (default: <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>path &#8211; item&#8217;s path (default: <code class="docutils literal"><span class="pre">''</span></code>).</li>
<li>fanart &#8211; item&#8217;s fanart (optional).</li>
<li>art &#8211; a dict containing all item&#8217;s graphic (see <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem.setArt" title="(in Kodistubs v2.0.0)"><code class="xref py py-meth docutils literal"><span class="pre">xbmcgui.ListItem.setArt()</span></code></a> for more info) &#8211; optional.</li>
<li>stream_info &#8211; a dictionary of <code class="docutils literal"><span class="pre">{stream_type:</span> <span class="pre">{param:</span> <span class="pre">value}}</span></code> items
(see <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem.addStreamInfo" title="(in Kodistubs v2.0.0)"><code class="xref py py-meth docutils literal"><span class="pre">xbmcgui.ListItem.addStreamInfo()</span></code></a>) &#8211; optional.</li>
<li>info &#8211;  a dictionary of <code class="docutils literal"><span class="pre">{media:</span> <span class="pre">{param:</span> <span class="pre">value}}</span></code> items
(see <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem.setInfo" title="(in Kodistubs v2.0.0)"><code class="xref py py-meth docutils literal"><span class="pre">xbmcgui.ListItem.setInfo()</span></code></a>) &#8211; optional</li>
<li>context_menu - a list that contains 2-item tuples <code class="docutils literal"><span class="pre">('Menu</span> <span class="pre">label',</span> <span class="pre">'Action')</span></code>.
The items from the tuples are added to the item&#8217;s context menu.</li>
<li>url &#8211; a callback URL for this list item.</li>
<li>is_playable &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, then this item is playable and must return a playable path or</li>
</ul>
<blockquote>
<div>be resolved via <a class="reference internal" href="#simpleplugin.Plugin.resolve_url" title="simpleplugin.Plugin.resolve_url"><code class="xref py py-meth docutils literal"><span class="pre">Plugin.resolve_url()</span></code></a> (default: <code class="docutils literal"><span class="pre">False</span></code>).</div></blockquote>
<ul class="simple">
<li>is_folder &#8211; if <code class="docutils literal"><span class="pre">True</span></code> then the item will open a lower-level sub-listing. if <code class="docutils literal"><span class="pre">False</span></code>,
the item either is a playable media or a general-purpose script
which neither creates a virtual folder nor points to a playable media (default: C{True}).
if <code class="docutils literal"><span class="pre">'is_playable'</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, then <code class="docutils literal"><span class="pre">'is_folder'</span></code> value automatically assumed to be <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li>subtitles &#8211; the list of paths to subtitle files (optional).</li>
<li>mime &#8211; item&#8217;s mime type (optional).</li>
<li>list_item &#8211; an &#8216;class:<cite>xbmcgui.ListItem</cite> instance (optional).
It is used when you want to set all list item properties by yourself.
If <code class="docutils literal"><span class="pre">'list_item'</span></code> property is present, all other properties,
except for <code class="docutils literal"><span class="pre">'url'</span></code> and <code class="docutils literal"><span class="pre">'is_folder'</span></code>, are ignored.</li>
<li>properties &#8211; a dictionary of list item properties
(see <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem.setProperty" title="(in Kodistubs v2.0.0)"><code class="xref py py-meth docutils literal"><span class="pre">xbmcgui.ListItem.setProperty()</span></code></a>) &#8211; optional.</li>
</ul>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">listing</span> <span class="o">=</span> <span class="p">[{</span>    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span>
                <span class="s1">&#39;label2&#39;</span><span class="p">:</span> <span class="s1">&#39;Label 2&#39;</span><span class="p">,</span>
                <span class="s1">&#39;thumb&#39;</span><span class="p">:</span> <span class="s1">&#39;thumb.png&#39;</span><span class="p">,</span>
                <span class="s1">&#39;icon&#39;</span><span class="p">:</span> <span class="s1">&#39;icon.png&#39;</span><span class="p">,</span>
                <span class="s1">&#39;fanart&#39;</span><span class="p">:</span> <span class="s1">&#39;fanart.jpg&#39;</span><span class="p">,</span>
                <span class="s1">&#39;art&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;clearart&#39;</span><span class="p">:</span> <span class="s1">&#39;clearart.png&#39;</span><span class="p">},</span>
                <span class="s1">&#39;stream_info&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;video&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;codec&#39;</span><span class="p">:</span> <span class="s1">&#39;h264&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">1200</span><span class="p">},</span>
                                <span class="s1">&#39;audio&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;codec&#39;</span><span class="p">:</span> <span class="s1">&#39;ac3&#39;</span><span class="p">,</span> <span class="s1">&#39;language&#39;</span><span class="p">:</span> <span class="s1">&#39;en&#39;</span><span class="p">}},</span>
                <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;video&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;genre&#39;</span><span class="p">:</span> <span class="s1">&#39;Comedy&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2005</span><span class="p">}},</span>
                <span class="s1">&#39;context_menu&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;Menu Item&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">)],</span>
                <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;plugin:/plugin.video.test/?action=play&#39;</span><span class="p">,</span>
                <span class="s1">&#39;is_playable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;is_folder&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;subtitles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;/path/to/subtitles.en.srt&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/subtitles.uk.srt&#39;</span><span class="p">],</span>
                <span class="s1">&#39;mime&#39;</span><span class="p">:</span> <span class="s1">&#39;video/mp4&#39;</span>
                <span class="p">}]</span>
</pre></div>
</div>
<p>Alternatively, an action callable can use <a class="reference internal" href="#simpleplugin.Plugin.create_listing" title="simpleplugin.Plugin.create_listing"><code class="xref py py-meth docutils literal"><span class="pre">Plugin.create_listing()</span></code></a> and <a class="reference internal" href="#simpleplugin.Plugin.resolve_url" title="simpleplugin.Plugin.resolve_url"><code class="xref py py-meth docutils literal"><span class="pre">Plugin.resolve_url()</span></code></a>
static methods to pass additional parameters to Kodi.</p>
<p>Example 3:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="n">listing</span> <span class="o">=</span> <span class="n">get_listing</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Some external function to create listing</span>
    <span class="k">return</span> <span class="n">Plugin</span><span class="o">.</span><span class="n">create_listing</span><span class="p">(</span><span class="n">listing</span><span class="p">,</span> <span class="n">sort_methods</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">),</span> <span class="n">view_mode</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 4:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">play_action</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">get_path</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Some external function to get a playable path</span>
    <span class="k">return</span> <span class="n">Plugin</span><span class="o">.</span><span class="n">resolve_url</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">succeeded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If an action callable performs any actions other than creating a listing or
resolving a playable URL, it must return <code class="docutils literal"><span class="pre">None</span></code>.</p>
<dl class="staticmethod">
<dt id="simpleplugin.Plugin.get_params">
<em class="property">static </em><code class="descname">get_params</code><span class="sig-paren">(</span><em>paramstring</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.get_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.get_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a URL-encoded paramstring to a Python dict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>paramstring</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; URL-encoded paramstring</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">parsed paramstring</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Plugin.get_url">
<code class="descname">get_url</code><span class="sig-paren">(</span><em>plugin_url=''</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.get_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.get_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a callable URL for a virtual directory item</p>
<p>If plugin_url is empty, a current plugin URL is used.
kwargs are converted to a URL-encoded string of plugin call parameters
To call a plugin action, &#8216;action&#8217; parameter must be used,
if &#8216;action&#8217; parameter is missing, then the plugin root action is called
If the action is not added to <a class="reference internal" href="#simpleplugin.Plugin" title="simpleplugin.Plugin"><code class="xref py py-class docutils literal"><span class="pre">Plugin</span></code></a> actions, <code class="xref py py-class docutils literal"><span class="pre">PluginError</span></code> will be raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>plugin_url</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; plugin URL with trailing / (optional)</li>
<li><strong>kwargs</strong> &#8211; pairs of key=value items</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a full plugin callback URL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="simpleplugin.Plugin.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>category=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run plugin</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>category</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; str - plugin sub-category, e.g. &#8216;Comedy&#8217;.
See <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcplugin.html#xbmcplugin.setPluginCategory" title="(in Kodistubs v2.0.0)"><code class="xref py py-func docutils literal"><span class="pre">xbmcplugin.setPluginCategory()</span></code></a> for more info.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">SimplePluginError if unknown action string is provided.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="simpleplugin.Plugin.create_listing">
<em class="property">static </em><code class="descname">create_listing</code><span class="sig-paren">(</span><em>listing</em>, <em>succeeded=True</em>, <em>update_listing=False</em>, <em>cache_to_disk=False</em>, <em>sort_methods=None</em>, <em>view_mode=None</em>, <em>content=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.create_listing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.create_listing" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and return a context dict for a virtual folder listing</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>listing</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#list" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> or <code class="xref py py-class docutils literal"><span class="pre">types.GeneratorType</span></code>) &#8211; the list of the plugin virtual folder items</li>
<li><strong>succeeded</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; if <code class="docutils literal"><span class="pre">False</span></code> Kodi won&#8217;t open a new listing and stays on the current level.</li>
<li><strong>update_listing</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, Kodi won&#8217;t open a sub-listing but refresh the current one.</li>
<li><strong>cache_to_disk</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; cache this view to disk.</li>
<li><strong>sort_methods</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) &#8211; the list of integer constants representing virtual folder sort methods.</li>
<li><strong>view_mode</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; a numeric code for a skin view mode.
View mode codes are different in different skins except for <code class="docutils literal"><span class="pre">50</span></code> (basic listing).</li>
<li><strong>content</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; string - current plugin content, e.g. &#8216;movies&#8217; or &#8216;episodes&#8217;.
See <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcplugin.html#xbmcplugin.setContent" title="(in Kodistubs v2.0.0)"><code class="xref py py-func docutils literal"><span class="pre">xbmcplugin.setContent()</span></code></a> for more info.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">context object containing necessary parameters
to create virtual folder listing in Kodi UI.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ListContext</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="simpleplugin.Plugin.resolve_url">
<em class="property">static </em><code class="descname">resolve_url</code><span class="sig-paren">(</span><em>path=''</em>, <em>play_item=None</em>, <em>succeeded=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.resolve_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.resolve_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and return a context dict to resolve a playable URL</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str or unicode</em>) &#8211; the path to a playable media.</li>
<li><strong>play_item</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; a dict of item properties as described in the class docstring.
It allows to set additional properties for the item being played, like graphics, metadata etc.
if <code class="docutils literal"><span class="pre">play_item</span></code> parameter is present, then <code class="docutils literal"><span class="pre">path</span></code> value is ignored, and the path must be set via
<code class="docutils literal"><span class="pre">'path'</span></code> property of a <code class="docutils literal"><span class="pre">play_item</span></code> dict.</li>
<li><strong>succeeded</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; if <code class="docutils literal"><span class="pre">False</span></code>, Kodi won&#8217;t play anything</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">context object containing necessary parameters
for Kodi to play the selected media.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">PlayContext</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="simpleplugin.Plugin.create_list_item">
<em class="property">static </em><code class="descname">create_list_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/simpleplugin.html#Plugin.create_list_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#simpleplugin.Plugin.create_list_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem" title="(in Kodistubs v2.0.0)"><code class="xref py py-class docutils literal"><span class="pre">xbmcgui.ListItem</span></code></a> instance from an item dict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; a dict of ListItem properties</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ListItem instance</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://romanvm.github.io/Kodistubs/_autosummary/xbmcgui.html#xbmcgui.ListItem" title="(in Kodistubs v2.0.0)">xbmcgui.ListItem</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">SimplePlugin</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=romanvm&repo=script.module.simpleplugin&type=star&v=2&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a href="https://travis-ci.org/romanvm/script.module.simpleplugin">
    <img
        alt="https://secure.travis-ci.org/romanvm/script.module.simpleplugin.svg?branch=master"
        src="https://secure.travis-ci.org/romanvm/script.module.simpleplugin.svg?branch=master"
    />
</a>
</p>




    

<p>
<a href="https://codecov.io/github/romanvm/script.module.simpleplugin">
    <img
    alt="https://codecov.io/github/romanvm/script.module.simpleplugin/coverage.svg?branch=master"
    src="https://codecov.io/github/romanvm/script.module.simpleplugin/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../example.html">Minimal Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_url.html">get_url Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage.html">Persistent Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cached.html">Cached Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Working with Plugin Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettext.html">Plugin Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using.html">Using SimplePlugin</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">simpleplugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../links.html">Useful Links</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Roman Miroshnychenko.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/_autosummary/simpleplugin.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/romanvm/script.module.simpleplugin" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>